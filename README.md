📘 README – Telegram Leads System
מערכת ניהול הרשמות, תומכים ומומחים לתנועת אחדות

📌 תקציר המערכת
המערכת היא בוט טלגרם מלא, מבוסס Python + FastAPI + python-telegram-bot, המאפשר:

רישום תומכים

רישום מומחים

ניהול מקומות (Positions)

ניהול קבוצות

ניהול גיליונות Google Sheets

שידור הודעות

תפריטי משתמש, מומחה ואדמין

לוגים מתקדמים

Smart Validation לגיליונות

המערכת בנויה בצורה מודולרית, קלה לתחזוקה, ומותאמת להרחבות עתידיות.

📁 מבנה תיקיות
קוד
campaign1/
│
├── bot/
│   ├── bot_handlers.py          # Router ראשי: start, menu, callbacks
│   ├── admin_handlers.py        # כל פקודות האדמין + תתי תפריטים
│   ├── expert_handlers.py       # תהליך הרשמת מומחה
│   ├── supporter_handlers.py    # תהליך הרשמת תומך
│   ├── keyboards.py             # כל המקלדות (InlineKeyboardMarkup)
│   ├── states.py                # כל ה־Conversation states
│
├── services/
│   ├── sheets_service.py        # כל העבודה מול Google Sheets
│   ├── logger_service.py        # לוגים לקבוצת לוגים
│
├── utils/
│   ├── constants.py             # כל הקבועים, callback data, ENV
│
├── main.py                      # נקודת כניסה לבוט + webhook + startup
├── requirements.txt             # ספריות Python
└── README.md                    # קובץ זה
🧠 סקירת עומק – מה המערכת עושה
1. רישום תומכים
תהליך מלא עם שאלות: שם, עיר, אימייל, טלפון, פידבק

שמירה בגיליון Users

קישור אישי לשיתוף

תפריט תומך עם פרופיל

2. רישום מומחים
תהליך מלא: שם, תחום, ניסיון, מקום, קישורים, למה אתה מתאים

שמירה בגיליון Experts

סטטוס: pending / approved / rejected

קישור מומחה אישי

תפריט מומחה עם מידע מלא

3. ניהול מקומות (Positions)
צפייה בכל המקומות

שיוך מומחה למקום

איפוס מקום

איפוס כל המקומות

תפריט אדמין להצגת מקומות

4. ניהול גיליונות Google Sheets
כולל מנגנון Smart Validation:

בדיקת כותרות

תיקון כותרות אוטומטי

ניקוי כפילויות

בדיקת תקינות מלאה

תפריט אדמין ייעודי לניהול גיליונות

5. ניהול קבוצות
הצגת מזהי קבוצות

שימוש ב־ENV

שידור הודעות לתומכים / מומחים

6. תפריטי משתמש
תפריט ראשי

תפריט תומך

תפריט מומחה

תפריט אדמין

תתי תפריטים: גיליונות, שידור, יצוא, ניווט מהיר

7. לוגים
כל פעולה משמעותית נרשמת

נשלחת לקבוצת לוגים

כולל פרמטרים חשובים

🚀 מה כבר בוצע (גרסה נוכחית)
✔ שדרוג מלא של admin_handlers
כולל:

ניהול גיליונות

שידור

יצוא

ניווט מהיר

מומחים ממתינים

חיפוש

רשימות

✔ שדרוג keyboards
כולל:

תפריט אדמין מקצועי

תפריט מומחה משופר

תפריט תומך משופר

תפריט ראשי ברור

✔ שדרוג bot_handlers
כולל:

Router נקי

טיפול בכל callback

תמיכה בתתי תפריטים

תמיכה ב־Smart Validation

✔ Smart Validation
תיקון כותרות

בדיקת תקינות

ניקוי כפילויות

תפריט גיליונות

✔ מבנה פרויקט נקי
מודולריות

קבצים מופרדים

קוד קריא

🛣️ מפת דרכים (Roadmap)
🔹 שלב 1 — שיפורים קלים (1–3 ימים)
1. הוספת מערכת הרשאות מתקדמת
תפקידים נוספים: מנהל־על, מנהל־מומחים, מנהל־תומכים

הרשאות לפי תפריט

2. שיפור תהליך מומחה
אימות קישורים

בדיקת שדות חובה

תמיכה בקבצים (PDF קורות חיים)

3. שיפור תהליך תומך
אימות אימייל

אימות טלפון

שדות נוספים

4. שיפור Smart Validation
בדיקת סוגי נתונים

בדיקת תאריכים

בדיקת user_id כפולים בזמן אמת

🔹 שלב 2 — פיצ'רים בינוניים (3–7 ימים)
1. מערכת Dashboard (ללא UI חיצוני)
פקודה /dashboard

הצגת סטטיסטיקות:

כמה תומכים

כמה מומחים

כמה מאושרים

כמה ממתינים

כמה מקומות תפוסים

2. מערכת דיווחים
/report_daily

/report_weekly

/report_positions

3. מערכת תגובות אוטומטיות
הודעות ברירת מחדל

הודעות מותאמות לפי סטטוס

🔹 שלב 3 — פיצ'רים מתקדמים (שבוע+)
1. מערכת CRM פנימית
מעקב אחרי כל משתמש

תיעוד פעולות

תיעוד הפניות

2. מערכת תורים למומחים
מומחים ממתינים

תעדוף

ניהול עומסים

3. אינטגרציה עם Google Drive
שמירת קבצים

שמירת מסמכים

4. אינטגרציה עם API חיצוניים
אימות אימייל

אימות טלפון

אימות זהות

🧩 מה אפשר לשפר בקלות בתוך המבנה הקיים
✔ הוספת פקודות חדשות
המערכת בנויה כך שקל להוסיף פקודות.

✔ הוספת תתי תפריטים
ה־callbackים כבר בנויים בצורה מודולרית.

✔ הוספת גיליונות חדשים
sheets_service.py בנוי כך שקל להוסיף גיליון נוסף.

✔ הוספת שדות חדשים למומחה/תומך
פשוט להוסיף state + שדה בגיליון.

✔ הוספת לוגים
המערכת כבר כוללת logger מובנה.

🧑‍💻 הוראות למפתחים חדשים
1. להבין את ה־flow
הכול מתחיל ב־main.py → bot_handlers.py → תתי־handlers.

2. להבין את Google Sheets
כל הנתונים נשמרים בגיליונות:

Users

Experts

Positions

3. להבין את Smart Validation
ריצה אוטומטית ב־startup.

4. להבין את התפריטים
כל תפריט = callback + keyboard.

5. להבין את ConversationHandler
משמש לרישום תומך/מומחה.

🧱 טכנולוגיות
Python

FastAPI

python-telegram-bot v20

Google Sheets API

Railway (deployment)

🏁 סיכום
המערכת שלך עכשיו:

יציבה

מודולרית

קלה לתחזוקה

מוכנה להרחבות

עם תפריטים מקצועיים

עם Smart Validation

עם פאנל אדמין מלא

ואתה יכול להמשיך לפתח אותה בקלות.

אם תרצה — אני יכול גם:

להכין גרסת README באנגלית

להכין דיאגרמת זרימה (Flowchart)

להכין ERD של הגיליונות

להכין מסמך API
